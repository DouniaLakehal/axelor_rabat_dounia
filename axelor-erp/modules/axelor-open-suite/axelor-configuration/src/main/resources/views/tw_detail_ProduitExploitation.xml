<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<object-views xmlns="http://axelor.com/xml/ns/object-views" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
			  xsi:schemaLocation="http://axelor.com/xml/ns/object-views http://axelor.com/xml/ns/object-views/object-views_5.3.xsd">

	<form title="Bugdet detail" name="tw_detail_ProduitExploitation" onNew="clacule_sous_tot_budget_detail_recette"
		  model="com.axelor.apps.configuration.db.RubriquesBudgetaire" width="large">
		<menubar>
			<menu title="Imprimer">
				<item title="Budget Produit F" action="imprimerBudgetProduitF"/>
			</menu>
		</menubar>

		<panel colSpan="12" >
			<panel-dashlet  canSearch="false" readonly="true" name="$prodExp" title="PRODUITS D'EXPLOITATION" action="prod_exploitation_detail_budget" colSpan="12"/>
			<panel colSpan="3" colOffset="9">
				<field type="decimal" readonly="true" colSpan="12" name="$recette_som1" title="TOTAL PRODUITS D'EXPLOITATION"/>
			</panel>
		</panel>

		<panel colSpan="12" >
			<panel-dashlet  name="$produitNonCourant" title="PRODUITS NON COURANTS" action="prod_non_courant" colSpan="12"/>
			<panel colSpan="3" colOffset="9">
				<field type="decimal" readonly="true" colSpan="12" name="$recette_som2" title="TOTAL PRODUITS NON COURANTS"/>
			</panel>
		</panel>

		<panel colSpan="12">
			<field colSpan="3" colOffset="9" readonly="true" name="$total_total_recette" type="decimal" title="TOTAL PRODUITS "/>
		</panel>
	</form>

	<form title="Budget detail" name="tw_ChargeExploitation" onNew="load_montant_sub_detail"
		  model="com.axelor.apps.configuration.db.RubriquesBudgetaire" width="large">
		<menubar>
			<menu title="Imprimer">
				<item title="Budget Produit F" action="imprimerBudgetProduitF"/>
			</menu>
		</menubar>

		<panel colSpan="12" >
			<panel-dashlet  canSearch="false" readonly="true" name="$chargConsom" title="ACHATS CONSOMMES DE MATIERES ET FOURNITURES" action="charge_consom_fourniture" colSpan="12"/>
			<panel colSpan="12">
				<field colSpan="3" colOffset="9" type="decimal" readonly="true" name="$recette_som1" title="TOTAL DES ACHATS CONSOMMES DE MATIERES ET FOURNITURES"/>
			</panel>

			<panel-dashlet  canSearch="false" readonly="true" name="$chargExterne" title="AUTRES CHARGES EXTERNES" action="autre_charge_externe" colSpan="12"/>
			<panel colSpan="12">
				<field colSpan="3" colOffset="9" type="decimal" readonly="true" name="$recette_som2" title="TOTAL AUTRES CHARGES EXTERNES"/>
			</panel>

			<panel-dashlet  canSearch="false" readonly="true" name="$impotAndTaxeField" title="IMPOTS ET TAXES" action="impotAndTaxe" colSpan="12"/>
			<panel colSpan="12">
				<field colSpan="3" colOffset="9" type="decimal" readonly="true" name="$recette_som3" title="TOTAL DES IMPOTS ET TAXES"/>
			</panel>

			<panel-dashlet  canSearch="false" readonly="true" name="$chargePersonnelField" title="CHARGES DE PERSONNEL" action="chargePersonnel" colSpan="12"/>
			<panel colSpan="12">
				<field colSpan="3" colOffset="9" type="decimal" readonly="true"  name="$recette_som4" title="TOTAL DES CHARGES DE PERSONNEL"/>
			</panel>

			<panel-dashlet  canSearch="false" readonly="true" name="$autreChargeExploitationField" title="AUTRES CHARGES D'EXPLOITATION" action="autreChargeExploitation" colSpan="12"/>
			<panel colSpan="12">
				<field colSpan="3" colOffset="9" type="decimal" readonly="true"  name="$recette_som5" title="TOTAL DES AUTRES CHARGES D'EXPLOITATION"/>
			</panel>

			<panel-dashlet  canSearch="false" readonly="true" name="$chargeInteretField" title="CHARGES D'INTERETS" action="chargeInteret" colSpan="12"/>
			<panel colSpan="12">
				<field colSpan="3" colOffset="9" type="decimal" readonly="true"  name="$recette_som6" title="TOTAL DES CHARGES D'INTERETS"/>
			</panel>

			<panel-dashlet  canSearch="false" readonly="true" name="$subAccordeField" title="SUBVENTIONS ACCORDEES" action="subAccorde" colSpan="12"/>
			<panel colSpan="12">
				<field colSpan="3" colOffset="9" type="decimal" readonly="true"  name="$recette_som7" title="TOTAL DES SUBVENTIONS ACCORDEES"/>
			</panel>

			<panel-dashlet  canSearch="false" readonly="true" name="$chargeCenterField" title="CHARGES DU CENTRE MULTISERVICES D'AIN CHKEF" action="chargeCenter" colSpan="12"/>
			<panel colSpan="12">
				<field colSpan="3" colOffset="9" type="decimal" readonly="true"  name="$recette_som8" title="TOTAL DES CHARGES DU CENTRE MULTISERVICES D'AIN CHKEF"/>
			</panel>

			<panel colSpan="12" >
				<button colSpan="2" title="DÃ©tail fonc-d" icon="fa-search" name="afficher_subDetail_8" onClick="afficher_subDetail_budget" />
				<field colSpan="3" colOffset="9" type="decimal" readonly="true"  name="$total_sub_detail" title="TOTAL DES CHARGES D'EXPLOITATION"/>
			</panel>

		</panel>

	</form>










	<grid title="Budget Detail" orderBy="code_budget" name="tw_detail_ProduitExploitation_grid" model="com.axelor.apps.configuration.db.RubriquesBudgetaire">
		<field name="code_budget" title="Code"/>
		<field name="titre_budget" title="Rubriques"/>
		<field name="montant_budget" title="Montant"/>
	</grid>

	<grid title="Budget Detail" orderBy="code_budget" name="tw_Sub_detail_ProduitExploitation_grid" model="com.axelor.apps.configuration.db.RubriquesBudgetaire">
		<field name="code_budget" title="Code"/>
		<field name="titre_budget" title="Rubriques"/>
		<field name="somme_mtChildren_mtBudget" title="Montant"/>
	</grid>

	<action-attrs name="refresh_budget_detail_produit_f">
		<attribute for="$prodExp" name="refresh" expr="eval:true"/>
		<attribute for="$produitNonCourant" name="refresh" expr="eval:true"/>
	</action-attrs>

	<action-view name="prod_exploitation_detail_budget" title="Produit Exploitation" model="com.axelor.apps.configuration.db.RubriquesBudgetaire">
		<view type="grid" name="tw_detail_ProduitExploitation_grid"/>
		<domain>self.anneCurrent =:fieldanne and self.is_detaille is true and self.typeRubriqueDetaille.id=:myid </domain>
		<context name="myid" expr="eval:12"/>
	</action-view>


	<action-view name="prod_non_courant" title="Produit Non Courant" model="com.axelor.apps.configuration.db.RubriquesBudgetaire">
		<view type="grid" name="tw_detail_ProduitExploitation_grid"/>
		<domain>self.anneCurrent =:fieldanne and self.is_detaille is true and self.typeRubriqueDetaille.id=:myid </domain>
		<context name="myid" expr="eval:13"/>
	</action-view>

	<action-method name="clacule_sous_tot_budget_detail_recette">
		<call class="com.axelor.apps.configuration.web.AppConfigurationController" method="calcule_tot_rubrique_detail_1"/>
	</action-method>


	<action-view name="charge_consom_fourniture" title="Produit Non Courant" model="com.axelor.apps.configuration.db.RubriquesBudgetaire">
		<view type="grid" name="tw_Sub_detail_ProduitExploitation_grid"/>
		<domain>(self.anneCurrent =:fieldanne and self.typeRubriqueDetaille.id=:type_budget_detaille_1 and self.budgetParent.id=:parent_budget_1 ) or (self.id =:parent_budget_1)  or (self.anneCurrent =:fieldanne and self.code_budget='61') </domain>
	</action-view>

	<action-view name="autre_charge_externe" title="Autre charge Externe" model="com.axelor.apps.configuration.db.RubriquesBudgetaire">
		<view type="grid" name="tw_Sub_detail_ProduitExploitation_grid"/>
		<domain>(self.anneCurrent =:fieldanne and self.typeRubriqueDetaille.id=:type_budget_detaille_2 and self.budgetParent.id=:parent_budget_2 ) or (self.id = :parent_budget_2) </domain>
	</action-view>

	<action-view name="impotAndTaxe" title="IMPOT AND TAXE" model="com.axelor.apps.configuration.db.RubriquesBudgetaire">
		<view type="grid" name="tw_Sub_detail_ProduitExploitation_grid"/>
		<domain>(self.anneCurrent =:fieldanne and self.typeRubriqueDetaille.id=:type_budget_detaille_3 and self.budgetParent.id=:parent_budget_3 ) or (self.id = :parent_budget_3) </domain>
	</action-view>

	<action-view name="chargePersonnel" title="CHARGE PERSONNEL" model="com.axelor.apps.configuration.db.RubriquesBudgetaire">
		<view type="grid" name="tw_Sub_detail_ProduitExploitation_grid"/>
		<domain>(self.anneCurrent =:fieldanne and self.typeRubriqueDetaille.id=:type_budget_detaille_4 and self.budgetParent.id=:parent_budget_4 ) or (self.id = :parent_budget_4) </domain>
	</action-view>

	<action-view name="autreChargeExploitation" title="AUTRE CHARGE EXPLOITATION" model="com.axelor.apps.configuration.db.RubriquesBudgetaire">
		<view type="grid" name="tw_Sub_detail_ProduitExploitation_grid"/>
		<domain>(self.anneCurrent =:fieldanne and self.typeRubriqueDetaille.id=:type_budget_detaille_5 and self.budgetParent.id=:parent_budget_5 ) or (self.id = :parent_budget_5) </domain>
	</action-view>

	<action-view name="chargeInteret" title="CHARGE INTERET" model="com.axelor.apps.configuration.db.RubriquesBudgetaire">
		<view type="grid" name="tw_Sub_detail_ProduitExploitation_grid"/>
		<domain>(self.anneCurrent =:fieldanne and self.typeRubriqueDetaille.id=:type_budget_detaille_6 and self.budgetParent.id=:parent_budget_6 ) or (self.id = :parent_budget_6) or (self.anneCurrent =:fieldanne and self.typeRubriqueDetaille.id=:type_budget_detaille_6 and self.code_budget='6311') </domain>
	</action-view>

	<action-view name="subAccorde" title="CHARGE INTERET" model="com.axelor.apps.configuration.db.RubriquesBudgetaire">
		<view type="grid" name="tw_Sub_detail_ProduitExploitation_grid"/>
		<domain>(self.anneCurrent =:fieldanne and self.typeRubriqueDetaille.id=:type_budget_detaille_7 and self.budgetParent.id=:parent_budget_7 ) or (self.id = :parent_budget_7) or (self.anneCurrent =:fieldanne and self.typeRubriqueDetaille.id=:type_budget_detaille_7 and self.code_budget in ('6561','6571') ) </domain>
	</action-view>

	<action-view name="chargeCenter" title="CHARGE INTERET" model="com.axelor.apps.configuration.db.RubriquesBudgetaire">
		<view type="grid" name="tw_Sub_detail_ProduitExploitation_grid"/>
		<domain> (self.id = :parent_budget_8) </domain>
	</action-view>

	<action-method name="load_montant_sub_detail">
		<call class="com.axelor.apps.configuration.web.AppConfigurationController" method="calcule_montant_sub_detail"/>
	</action-method>

	<action-method name="afficher_subDetail_budget">
		<call class="com.axelor.apps.configuration.web.AppConfigurationController" method="show_montant_detailFromSubdetail"/>
	</action-method>
</object-views>
